
<!-- BEGIN CONTENT -->
<div class="page-content-wrapper">
    <div class="page-content">
        <!-- BEGIN PAGE HEADER-->
        <div class="breadcrumbs">
            <h1>
                PC Detail Report
            </h1>
            <ol class="breadcrumb">
                <li>
                    <a href="">Home</a>
                </li>
                <li class="active">PC Detail List</li>
            </ol>

        </div>
        <!-- END PAGE HEADER-->
        <!-- BEGIN PAGE CONTENT-->
        <div class="row">
            <div class="col-md-12">


                <div class="row">

                    <div class="col-md-12">
                        <div class="portlet light bordered">

                            <div class="portlet-body form">
                                <form role="form" class="validate-form" method="post" id="myform">
                                    <div class="form-body" style="padding:0px;">
                                        <div class="alert alert-danger display-hide">
                                            <button class="close" data-close="alert"></button>
                                            You have some form errors. Please check below.
                                        </div>



                                        <input type="hidden" id="page-no" name="page_no" value="1" />

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label">Date Range </label>
                                                    <div class="input-group date-picker input-daterange" data-date-format="dd-mm-yyyy">
                                                        <input type="text" class="form-control required" id="start_range" name="start_range">
                                                        <input type="hidden" id="hdStartRange" />
                                                        <span class="input-group-addon">
                                                            to
                                                        </span>
                                                        <input type="text" class="form-control required" data-date-format="dd-mm-yyyy" id="end_range" name="end_range">
                                                        <input type="hidden" id="hdEndRange" />
                                                    </div>
                                                </div>
                                            </div>


                                         


                                            <div class="col-md-4">
                                                <div class="form-group" id="report-sel-part-error">
                                                    <label class="control-label">&nbsp;</label>

                                                    <button class="button" type="submit" style="margin-top:24px;">Search</button>
                                                </div>
                                            </div>



                                        </div>
                                     
                                        <div class="alert  dvMessage hide">
                                            <button class="close" data-close="alert"></button>
                                            <div class="dvMessage text-center">

                                            </div>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>

                    <div class="col-md-12  hide" id="dvList">
                        <div class="portlet light bordered">
                            <div class="portlet-title">
                                <div class="caption">
                                    <i class="fa fa-reorder"></i>PC Detail List
                                </div>
                                <div class="actions">
                                    <a class="button normals btn-circle" onclick="exportData()">
                                        <i class="fa fa-download"></i> Excel Export
                                    </a>
                                </div>
                            </div>
                            <div class="portlet-body" id="myContainer">
                                <!--div class="pagination-sec pull-right"></div>
                                <div style="clear:both;"></div>-->
                                <!--<div class="table-scrollable">-->




                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END PAGE CONTENT-->
    </div>
</div>


@section Scripts {


    <script type="text/javascript">

        $('#start_range').on('changeDate', function (selected) {

            var date = $(this).datepicker('getDate');

            date.setDate(date.getDate() + 30);
            $('#end_range').datepicker('setEndDate', date);
            $('#hdStartRange').val(
                $('#start_range').datepicker('getFormattedDate')
            );


        });

        $('#end_range').on('changeDate', function (selected) {

            $('#hdEndRange').val(

                $('#end_range').datepicker('getFormattedDate')

            );


        });



        $("#myform").on("submit", function (event) {

            if ($("#myform").valid()) {

                $("#dvList").addClass("hide")
                $.ajax({
                    type: "GET",
                    url: "../Report/GetPcDetailRpt",
                    data: { sDate: $('#hdStartRange').val(), eDate: $('#hdEndRange').val()},
                    //dataType: "json",
                    success: function (response) {
                        $("#dvList").removeClass("hide")
                        $("#myContainer").html('');
                        $("#myContainer").html(response);
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        var messs = "<button class='close' data-close='alert'></button><div class='text-center' >Data not Found</div >";
                        $('.dvMessage').addClass('alert-warning')
                        $('.dvMessage').removeClass('hide')
                        // var message = "<div class='alertBox successMessage'><span>Success: </span>" + response.message + "</div>";
                        $('.dvMessage').html(messs).show();
                    }
                });
            }
            else {


            }

            event.preventDefault();
        });


        function exportData() {

           

            var url = '@Url.Action("ExportExcelPcDetailRpt", "Report")' + "?sDate=" + $('#hdStartRange').val() + "&eDate=" + $('#hdEndRange').val();


            location.href = url;


        }
    </script>
}