using System;
using System.Linq;
using System.IO;

/// <summary>
/// Summary description for clsWriteLog
/// </summary>
public class clsWriteLog
{
    public clsWriteLog()
    {
        
    }
    public static void WriteLog(string pMsg)
    {
        //*********************************************************************        
        // This rtn provides a very easy way to display information when
        // debugging. The info is written to a file called trace.log in
        // the root directory. You can view the trace log directly in
        // Visual Studio or in the browser.
        //
        // To display anything anywhere,
        // just use clsGeneric.WriteLog("anything anywhere")
        // Comment out or delete WriteLog statements after debugging
        //*********************************************************************
        string filePath = System.Web.HttpContext.Current.Server.MapPath("~//trace.log");
        StreamWriter sw = null;
        if (File.Exists(filePath) == false)
        {
            // Create a file to write to.
            sw = File.CreateText(filePath);
            sw.WriteLine(" ---------- Begin ------------");
            sw.Flush();
            sw.Close();
        }
        try
        {
            sw = File.AppendText(filePath);            
            sw.WriteLine(string.Format("{0:dd-MMM-yyyy, hh:mm:ss tt} -> {1}", DateTime.Now, pMsg));
            sw.Flush();
            sw.Close();
        }
        catch (Exception Ex)
        {
            throw new Exception("ERROR: write log: " + Ex.Message.ToString(), Ex);
        }
    }
}